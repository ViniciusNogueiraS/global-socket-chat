<!doctype html>
<html>
  <head>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Global Chat</title>
    <link rel="stylesheet" href="style.css">
  </head>
  <body>
    <div id='wrap'>
      <h1>Global Chat</h1>
      <h2>Socket.IO</h2>
      <form id="user" action="/chat" method="POST">
        <input autocomplete="off" type="text" name="user" placeholder="nickname"/>
        <button type="submit">OK</button>
      </form>
      <p id="foot">GitHub - ViniciusNogueiraS/GlobalChat - v.nog@outlook.com</p>
    </div>
    <script src="https://cdn.socket.io/socket.io-1.2.0.js"></script>
    <script src="https://code.jquery.com/jquery-1.11.1.js"></script>
    <script>
      function uuidv4() {
        return 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, function(c) {
          var r = Math.random() * 16 | 0, v = c == 'x' ? r : (r & 0x3 | 0x8);
          return v.toString(16);
        });
      }

      $('#user').submit(function() {
        if ($('#user input')[0].value == '') {
          return false;
        }else{
          window.sessionStorage.setItem('user', JSON.stringify({
            id: uuidv4(),
            nickname: $('#user input')[0].value
          }));
          return true;
        }
      });
    </script>
  </body>
</html>
